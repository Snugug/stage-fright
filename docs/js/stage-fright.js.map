{"version":3,"sources":["lib/helpers.js","lib/matrix.js","lib/init.js","lib/translate.js","lib/navigation.js","lib/notes.js","lib/progress.js","lib/keys.js","lib/overview.js","lib/core.js","stage-fright.js"],"names":["nodeMap","nodes","cb","Array","prototype","map","call","idleRun","window","requestIdleCallback","start","Date","now","setTimeout","didTimeout","timeRemaining","Math","max","getActiveSlide","hash","location","split","shift","section","parseInt","slide","fragment","Matrix","constructor","script","document","currentScript","src","path","options","length","buildOptions","search","substr","_script","_options","_notes","_raw","stage","querySelector","groups","querySelectorAll","slides","_slides","group","fragments","concat","f","notes","note","opt","existing","obj","decodeURI","replace","opts","JSON","parse","key","value","parseFloat","toString","e","Object","assign","init","active","isNaN","history","pushState","translate","s","p","i","setAttribute","style","transform","nav","next","matrix","previous","left","right","move","mv","updateProgress","sendNotes","sec","sld","frag","sendMessage","nextSection","lastSlide","previousSection","isArray","activeFragments","removeAttribute","sectionLength","inactiveFragment","last","openNotes","go","locale","open","origin","body","html","innerHTML","timing","update","diff","getTime","hours","floor","minutes","seconds","clock","textContent","toLocaleTimeString","hour12","hour","minute","timePad","second","time","str","substring","setInterval","target","message","postMessage","slideMessage","addEventListener","event","originalEvent","data","notesMessage","current","upcoming","contentWindow","progress","createElement","classList","add","sections","forEach","href","opacity","appendChild","getAttribute","transitionProperty","node","keys","hasAttribute","keyCode","overview","addClick","closest","removeClick","removeEventListener","wwidth","innerWidth","wheight","innerHeight","width","scrollWidth","height","scrollHeight","wratio","hratio","transformOrigin","scale","hwidth","stageFright","listen","responsive","fontSize"],"mappings":"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","file":"stage-fright.js","sourcesContent":["export function nodeMap(nodes, cb) {\n  return Array.prototype.map.call(nodes, cb);\n}\n\nexport function idleRun(cb) {\n  if ('requestIdleCallback' in window) {\n    window.requestIdleCallback(cb);\n  }\n  else {\n    const start = Date.now();\n    return setTimeout(() => {\n      cb({\n        didTimeout: false,\n        timeRemaining: () => {\n          return Math.max(0, 50 - (Date.now() - start));\n        }\n      });\n    }, 1);\n  }\n}\n\nexport function getActiveSlide() {\n  const hash = location.hash.split('/');\n  hash.shift();\n\n  return {\n    section: parseInt(hash[0]),\n    slide: parseInt(hash[1]),\n    fragment: parseInt(hash[2]),\n  };\n};\n","import {nodeMap} from './helpers';\n\nexport default class {\n  constructor() {\n    const script = document.currentScript.src.split('?');\n    const path = script[0];\n    let options = {};\n\n    // Script Options\n    if (script.length > 1) {\n      options = buildOptions(script[1]);\n    }\n\n    // Window Options\n    if (document.location.search) {\n      options = buildOptions(document.location.search.substr(1));\n    }\n\n    // console.log(options);\n\n    this._script = path;\n    this._options = options;\n    this._notes = false;\n\n    this._raw = {\n      stage: document.querySelector('._stage'),\n      groups: document.querySelectorAll('._stage--group'),\n      slides: document.querySelectorAll('._stage--slide'),\n    };\n\n    this._slides = nodeMap(this._raw.groups, group => {\n      const slides = group.querySelectorAll('._stage--slide');\n\n      return nodeMap(slides, slide => {\n        const fragments = slide.querySelectorAll('.fragment');\n\n        if (fragments.length === 0) {\n          return slide;\n        }\n\n        return [slide].concat(nodeMap(fragments, f => f));\n      });\n    });\n  }\n\n  get slides() {\n    return this._slides;\n  }\n\n  get stage() {\n    return this._raw.stage;\n  }\n\n  get script() {\n    return this._script;\n  }\n\n  get options() {\n    return this._options;\n  }\n\n  get notes() {\n    return this._notes;\n  }\n\n  set notes(note) {\n    this._notes = note;\n    return note;\n  }\n}\n\nfunction buildOptions(opt, existing) {\n  let options = existing || {};\n  if (opt) {\n    const obj = `{\"${decodeURI(opt).replace(/&/g, '\",\"').replace(/=/g, '\":\"')}\"}`;\n    const opts = JSON.parse(obj, (key, value) => {\n      if (parseFloat(value).toString() === value) {\n        return parseFloat(value);\n      }\n\n      try {\n        return JSON.parse(value);\n      }\n      catch(e) {\n        return value;\n      }\n\n      return value;\n    });\n\n    options = Object.assign(opts, options);\n  }\n\n\n  return options;\n}\n","import {getActiveSlide} from './helpers';\n\nexport default function() {\n  const active = getActiveSlide();\n  let slide = 0;\n  let section = 0;\n\n  if (isNaN(active.section) || isNaN(active.slide)) {\n    history.pushState(null, null, `#/${section}/${slide}`);\n  }\n}\n","import {getActiveSlide} from './helpers';\n\nexport default function(s, p, f) {\n  const stage = document.querySelector('._stage');\n  let section = s;\n  let slide = p;\n  let fragment = f;\n\n  if (!(s && p) && s !== 0 && p !== 0) {\n    const active = getActiveSlide();\n    if (!s) {\n      section = active.section;\n    }\n    if (!p) {\n      slide = active.slide;\n    }\n  }\n\n  const fragments = document.querySelector(`[data-slide=\"${slide}\"][data-section=\"${section}\"]`).querySelectorAll('.fragment');\n  for (let i = 0; i < fragment; i++) {\n    fragments[i].setAttribute('data-active', true);\n  }\n\n  stage.style.transform = `translateX(${-100 * section}vw) translateY(${-100 * slide}vh)`;\n}\n","import {getActiveSlide} from './helpers';\nimport {updateProgress} from './progress';\nimport translate from './translate';\nimport {sendMessage, sendNotes} from './notes';\n\nexport default class {\n  static next(matrix, notes) {\n    const active = getActiveSlide();\n    let section = active.section;\n    let slide = active.slide;\n    let fragment = active.fragment;\n\n    return next(section, slide, fragment, matrix);\n  }\n\n  static previous(matrix, notes) {\n    const active = getActiveSlide();\n    let section = active.section;\n    let slide = active.slide;\n    let fragment = active.fragment;\n\n    return previous(section, slide, fragment, matrix);\n  }\n\n  static left(matrix, notes) {\n    const active = getActiveSlide();\n    let section = active.section;\n    let slide = active.slide;\n    let fragment = active.fragment;\n\n    return left(section, slide, fragment, matrix);\n  }\n\n  static right(matrix, notes) {\n    const active = getActiveSlide();\n    let section = active.section;\n    let slide = active.slide;\n    let fragment = active.fragment;\n\n    return right(section, slide, fragment, matrix);\n  }\n\n  static move(section, slide, fragment) {\n    // console.log(section);\n    // console.log(slide);\n    // console.log(fragment);\n    // updateProgress(section, slide, fragment);\n    return translate(section, slide, fragment);\n  }\n}\n\nfunction move(mv) {\n  let path = `#/${mv.section}/${mv.slide}`;\n  const fragments = document.querySelector(`[data-slide=\"${mv.slide}\"][data-section=\"${mv.section}\"]`).querySelectorAll('.fragment[data-active]').length;\n\n  if (isNaN(mv.fragment)) {\n    updateProgress(mv.section, mv.slide);\n    translate(mv.section, mv.slide);\n    if (fragments !== 0) {\n      updateProgress(mv.section, mv.slide, fragments);\n      path += `/${fragments}`;\n    }\n  }\n  else {\n    updateProgress(mv.section, mv.slide, mv.fragment);\n    path += `/${mv.fragment}`;\n  }\n\n  history.pushState(null, null, path);\n  sendNotes(mv.section, mv.slide, mv.matrix);\n\n  return {\n    section: mv.section,\n    slide: mv.slide,\n    fragment: mv.fragment,\n  };\n}\n\nfunction right(sec, sld, frag, matrix) {\n  let section = sec;\n  let slide = sld;\n  let fragment = frag;\n\n  sendMessage(matrix.notes, {\n    move: 'right',\n  });\n\n  section = nextSection(section, matrix);\n  if (slide > lastSlide(section, matrix)) {\n    slide = 0;\n  }\n\n  return move({section, slide, matrix});\n}\n\nfunction left(sec, sld, frag, matrix) {\n  let section = sec;\n  let slide = sld;\n  let fragment = frag;\n\n  sendMessage(matrix.notes, {\n    move: 'left',\n  });\n\n  section = previousSection(section);\n  if (slide > lastSlide(section, matrix)) {\n    slide = 0;\n  }\n\n  return move({section, slide, matrix});\n}\n\nfunction previous(sec, sld, frag, matrix) {\n  let section = sec;\n  let slide = sld;\n  let fragment = frag;\n\n  sendMessage(matrix.notes, {\n    move: 'previous',\n  });\n\n  if (Array.isArray(matrix.slides[section][slide])) {\n    let activeFragments = matrix.slides[section][slide][0].querySelectorAll('.fragment[data-active]');\n    if (activeFragments) {\n\n      const fragments = activeFragments.length - 1;\n      if (fragments >= 0) {\n        activeFragments[fragments].removeAttribute('data-active');\n        return move({section, slide, fragments, matrix});\n      }\n    }\n  }\n\n  slide -= 1;\n  if (slide < 0) {\n    section = previousSection(section);\n\n    if (section !== 0) {\n      slide = lastSlide(section, matrix);\n    }\n    else {\n      slide = 0;\n    }\n  }\n\n  return move({section, slide, matrix});\n}\n\nfunction next(sec, sld, frag, matrix) {\n  let section = sec;\n  let slide = sld;\n  let fragment = frag;\n  const sectionLength = matrix.slides.length;\n\n  sendMessage(matrix.notes, {\n    move: 'next',\n  });\n\n  if (Array.isArray(matrix.slides[section][slide])) {\n    let inactiveFragment = matrix.slides[section][slide][0].querySelector('.fragment:not([data-active])');\n    if (inactiveFragment) {\n      const fragments = matrix.slides[section][slide][0].querySelectorAll('.fragment[data-active]').length + 1;\n      inactiveFragment.setAttribute('data-active', true);\n\n      return move({section, slide, fragments, matrix});\n    }\n  }\n\n  slide += 1;\n  fragment = undefined;\n\n  if (slide > lastSlide(section, matrix)) {\n    section = nextSection(section, matrix);\n    let last = lastSlide(section, matrix);\n    if (section === sectionLength - 1 && slide > last) {\n      slide = last;\n    }\n    else if (section <= sectionLength - 1) {\n      slide = 0;\n    }\n  }\n\n  return move({section, slide, fragment, matrix});\n}\n\nfunction previousSection(sec) {\n  let section = sec;\n\n  section -= 1;\n  if (section < 0) {\n    section = 0;\n  }\n\n  return section;\n}\n\nfunction nextSection(sec, matrix) {\n  let section = sec;\n  const length = matrix.slides.length;\n\n  section += 1;\n  if (section >= length) {\n    section = length - 1;\n  }\n\n  return section;\n}\n\nfunction lastSlide(sec, matrix) {\n  let section = sec;\n  const length = matrix.slides[section].length;\n\n  return length - 1;\n}\n","import nav from './navigation';\nimport {getActiveSlide} from './helpers';\n\nexport function openNotes() {\n  const active = {\n    go: getActiveSlide(),\n  };\n  const locale = window.location;\n\n  const notes = window.open(`${locale.origin}?notes=true`, 'Stage Fright - Notes', 'width=1100,height=700');\n\n  setTimeout(() => {\n    sendMessage(notes, active);\n  }, 1000);\n\n  return notes;\n}\n\nexport function body() {\n  const locale = window.location;\n  const html = `\n<style>\n  body {\n    margin: 0;\n    padding: 0;\n    display: flex;\n    overflow: hidden;\n    font-size: 100%;\n  }\n\n  * {\n    box-sizing: border-box;\n  }\n\n  .clock,\n  .timer {\n    flex: 1;\n    font-family: sans-serif;\n    font-size: 2em;\n  }\n  .timer {\n    text-align: left;\n  }\n  .clock {\n    text-align: right;\n  }\n\n\n  [data-mute] {\n    opacity: .5;\n  }\n\n  .slide {\n    position: relative;\n  }\n\n  .slide--current {\n    width: calc(60vw - 1em);\n    height: calc(100vh - 1em);\n    padding: .25em;\n  }\n\n  .slide--upcoming {\n    width: calc(40vw - 1em);\n    height: calc(40vh - 1em);\n  }\n\n  .slide--frame {\n    // border: 1px solid black;\n  }\n\n  .slide--label {\n    text-transform: uppercase;\n    position: absolute;\n    color: white;\n    background: black;\n    opacity: .5;\n    width: 100%;\n    padding: .25em;\n  }\n\n  .current {\n    width: 60vw;\n    padding: .5em;\n  }\n\n  .speaker-notes {\n    width: 40vw;\n    padding: .5em;\n  }\n\n  .controls {\n    font-size: .8em;\n  }\n\n  .controls--time {\n    display: flex;\n    flex-wrap: wrap;\n  }\n\n  .controls--label {\n    font-family: sans-serif;\n    opacity: .5;\n    text-transform: lowercase;\n    margin: 0;\n    flex-shrink: 0;\n    width: 100%;\n  }\n\n  .controls--reset {\n    color: transparent;\n    font-size: 1px;\n  }\n\n  .notes {\n    font-family: sans-serif;\n    margin-top: 1rem;\n  }\n\n  .notes--label {\n    font-size: 1px;\n    color: transparent;\n  }\n\n</style>\n<div class=\"current\">\n    <div class=\"slide\">\n      <div class=\"slide--holder\">\n        <iframe src=\"${locale.origin}?progress=false&responsive=true&listen=true${locale.hash}\" frameborder=\"0\" class=\"slide--current\" height=\"1024\" width=\"1280\"></iframe>\n      </div>\n    </div>\n  </div>\n  <div class=\"speaker-notes\">\n    <div class=\"slide\">\n      <span class=\"slide--label\">Upcoming:</span>\n      <div class=\"slide--holder\">\n        <iframe src=\"${locale.origin}?progress=false&responsive=true&listen=true${locale.hash}\" frameborder=\"0\" class=\"slide--upcoming\" height=\"1024\" width=\"1280\"></iframe>\n      </div>\n    </div>\n    <div class=\"controls\">\n        <div class=\"controls--time\">\n        <h4 class=\"controls--label\">Time <span class=\"controls--reset\">Click to Reset</span></h4>\n        <div class=\"timer\">\n          <span class=\"timer--hours\">00</span><span class=\"timer--minutes\">:00</span><span class=\"timer--seconds\">:00</span>\n        </div>\n        <div class=\"clock\">\n          <span class=\"clock--value\">0:00 AM</span>\n        </div>\n        <div class=\"controls--clear\"></div>\n      </div>\n    </div>\n    <div class=\"notes\">\n      <h4 class=\"notes--label\">Notes</h4>\n      <div class=\"notes--content\"></div>\n    </div>\n  </div>\n`;\n  document.body.innerHTML = html;\n  return html;\n}\n\nexport function sendNotes(section, slide, matrix) {\n  let notes = document.querySelector(`[data-slide=\"${slide}\"][data-section=\"${section}\"] .notes`);\n  if (notes) {\n    notes = notes.innerHTML;\n  }\n  else {\n    notes = '<p></p>';\n  }\n\n  sendMessage(matrix.notes, {\n    notes,\n  });\n\n  return notes;\n}\n\nexport function timing() {\n  const clock = document.querySelector('.clock--value');\n  const hour = document.querySelector('.timer--hours');\n  const minute = document.querySelector('.timer--minutes');\n  const second = document.querySelector('.timer--seconds');\n  const start = new Date();\n\n  update();\n  setInterval(update, 1000);\n\n  function update() {\n    const now = new Date();\n\n    const diff = now.getTime() - start.getTime();\n    const hours = Math.floor(diff / (1000 * 60 * 60));\n    const minutes = Math.floor((diff / (1000 * 60)) % 60);\n    const seconds = Math.floor((diff / (1000)) % 60);\n\n    clock.textContent = now.toLocaleTimeString('en-US', {\n      hour12: true,\n      hour: '2-digit',\n      minute: '2-digit',\n    });\n    hour.textContent = timePad(hours);\n    minute.textContent = `:${timePad(minutes)}`;\n    second.textContent = `:${timePad(seconds)}`;\n\n    if (hours <= 0) {\n      hour.setAttribute('data-mute', true);\n    }\n    else {\n      hour.removeAttribute('data-mute');\n    }\n\n    if (minutes <= 0) {\n      minute.setAttribute('data-mute', true);\n    }\n    else {\n      minute.removeAttribute('data-mute');\n    }\n  }\n\n  function timePad(time) {\n    const str = `00${parseInt(time)}`;\n    return str.substring(str.length - 2);\n  }\n}\n\nexport function sendMessage(target, message) {\n  const locale = window.location;\n  if (target) {\n    target.postMessage(message, locale.origin);\n  }\n}\n\nexport function slideMessage(matrix) {\n  window.addEventListener('message', e => {\n    // console.log(e);\n    const origin = e.origin || event.originalEvent.origin;\n    if (origin !== window.location.origin) {\n      return;\n    }\n\n    if (e.data.move) {\n      return nav[e.data.move](matrix);\n    }\n  }, false);\n}\n\nexport function notesMessage() {\n  const current = document.querySelector('.slide--current');\n  const upcoming = document.querySelector('.slide--upcoming');\n  const notes = document.querySelector('.notes--content');\n\n\n  window.addEventListener('message', e => {\n    const origin = e.origin || event.originalEvent.origin;\n    if (origin !== window.location.origin) {\n      return;\n    }\n\n    // console.log(e);\n\n    if (e.data.move) {\n      sendMessage(current.contentWindow, {move: e.data.move});\n      sendMessage(upcoming.contentWindow, {move: e.data.move});\n    }\n\n    if (e.data.go) {\n      let hash = `#/${e.data.go.section}/${e.data.go.slide}`;\n      if (e.data.go.fragment) {\n        hash += `/${e.data.go.fragment}`;\n      }\n\n      current.src = current.src + hash;\n      upcoming.src = upcoming.src + hash;\n      sendMessage(upcoming.contentWindow, {move: 'next'});\n    }\n\n    if (e.data.notes) {\n\n      notes.innerHTML = e.data.notes;\n    }\n  }, false);\n}\n","import {idleRun, getActiveSlide, nodeMap} from './helpers';\nimport translate from './translate';\nimport {sendMessage} from './notes';\n\nexport default function(matrix) {\n  idleRun(() => {\n    // Create Progress\n    const progress = document.createElement('nav');\n    progress.classList.add('progress');\n\n    // Get active slide\n    const active = getActiveSlide();\n\n    // Build Sections\n    let sections = 0;\n    matrix.slides.forEach(section => {\n      const sec = document.createElement('div');\n      sec.setAttribute('data-section', sections);\n      sec.classList.add('progress--section');\n\n      let slides = 0;\n      section.forEach(slide => {\n        const sld = document.createElement('a');\n        sld.href = `#/${sections}/${slides}`;\n        sld.classList.add('progress--slide');\n        sld.setAttribute('data-slide', slides);\n        sld.setAttribute('data-section', sections);\n        sld.setAttribute('tabindex', '-1');\n        sld.textContent = `Section ${sections}, Slide ${slides}`;\n\n        if (Array.isArray(slide)) {\n          sld.style.opacity = .5;\n          sld.setAttribute('data-fragments', slide.length - 1);\n        }\n\n        if (active.section === sections && active.slide === slides) {\n          sld.setAttribute('data-active', 'true');\n        }\n\n        sec.appendChild(sld);\n\n        if (Array.isArray(slide)) {\n          slide[0].setAttribute('data-slide', slides);\n          slide[0].setAttribute('data-section', sections);\n          if (active.section === sections && active.slide === slides) {\n            slide[0].setAttribute('data-active', true);\n          }\n        }\n        else {\n          slide.setAttribute('data-slide', slides);\n          slide.setAttribute('data-section', sections);\n          if (active.section === sections && active.slide === slides) {\n            slide.setAttribute('data-active', true);\n          }\n        }\n\n        slides++;\n      });\n\n      progress.appendChild(sec);\n\n      sections++;\n    });\n\n    if (matrix.options.progress !== false) {\n      document.body.appendChild(progress);\n    }\n\n    translate(active.section, active.slide, active.fragment);\n    updateProgress(active.section, active.slide, active.fragment);\n  });\n\n  window.addEventListener('hashchange', e => {\n    const active = getActiveSlide();\n    updateProgress(active.section, active.slide, active.fragment);\n    translate(active.section, active.slide, active.fragment);\n    sendMessage(matrix.notes, {\n      go: active,\n    });\n  });\n}\n\nexport function updateProgress(section, slide, fragment) {\n  const current = document.querySelectorAll('[data-active]:not(.fragment)');\n  const next = document.querySelectorAll(`[data-section=\"${section}\"][data-slide=\"${slide}\"`);\n  const progress = document.querySelector('.progress--slide[data-active]');\n\n  if (progress) {\n    if (fragment) {\n      const fragments = parseInt(progress.getAttribute('data-fragments'));\n      if (fragment === fragments) {\n        progress.style.transitionProperty = 'none';\n        progress.style.opacity = 1;\n      }\n      else {\n        progress.style.transitionProperty = 'none';\n        progress.style.opacity = .5;\n      }\n    }\n    else {\n      progress.style.transitionProperty = 'all';\n      nodeMap(current, node => {\n        node.removeAttribute('data-active');\n      });\n\n      nodeMap(next, node => {\n        node.setAttribute('data-active', 'true');\n      });\n    }\n  }\n}\n","import nav from './navigation';\nimport {openNotes, sendMessage} from './notes';\n\nexport default function(matrix) {\n  document.addEventListener('keydown', (e) => {\n    if (matrix.stage.hasAttribute('data-overlay')) {\n      return;\n    }\n\n    // Left Arrow\n    if (e.keyCode === 37) {\n      return nav.left(matrix);\n    }\n\n    // Right Arrow\n    if (e.keyCode === 39) {\n      return nav.right(matrix);\n    }\n\n    // Up Arrow, Page Up\n    if (e.keyCode === 38 || e.keyCode === 33) {\n      return nav.previous(matrix);\n    }\n\n    // Down Arrow, Page Down, Spacebar\n    if (e.keyCode === 40 || e.keyCode === 34 || e.keyCode === 32) {\n      return nav.next(matrix);\n    }\n\n    if (e.keyCode === 83) {\n      matrix.notes = openNotes();\n      return matrix;\n    }\n\n    return;\n  });\n}\n","import {nodeMap} from './helpers';\nimport {updateProgress} from './progress';\nimport translate from './translate';\n\nexport default function(matrix) {\n  let open = false;\n  const slides = matrix._raw.slides;\n\n  document.addEventListener('keydown', e => {\n    if (e.keyCode === 27) {\n      if (open) {\n        open = false;\n      }\n      else {\n        open = true;\n      }\n\n      // Translate back to active\n      if (open === false) {\n        matrix.stage.removeAttribute('data-overlay');\n        removeClick(slides);\n        translate();\n        return;\n      }\n\n      // Move to overview\n      const wwidth = window.innerWidth;\n      const wheight = window.innerHeight;\n      const width = matrix.stage.scrollWidth;\n      const height = matrix.stage.scrollHeight;\n      const wratio = wwidth / width;\n      const hratio = wheight / height;\n\n      if (wratio <= hratio) {\n        let offset = 64 / wratio;\n        let scale = wwidth / (width + offset);\n        matrix.stage.style.transform = `scale(${scale})`;\n        matrix.stage.style.transformOrigin = `32px ${height * wratio / 2 - 32}px`;\n      }\n      else {\n        let offset = 64 / hratio;\n        let scale = hwidth / (width + offset);\n        matrix.stage.style.transform = `scale(${scale})`;\n        matrix.stage.style.transformOrigin = `${width * hratio / 2 - 32}px 32px`;\n      }\n\n      matrix.stage.setAttribute('data-overlay', 'true');\n\n      // Make slides clickable\n      nodeMap(slides, slide => {\n        slide.addEventListener('click', addClick);\n      });\n\n      function addClick(e) {\n        const target = e.target.closest('[data-section][data-slide]');\n        let section = target.getAttribute('data-section');\n        let slide = target.getAttribute('data-slide');\n\n        removeClick(slides);\n        matrix.stage.removeAttribute('data-overlay');\n        history.pushState(null, null, `#/${section}/${slide}`);\n        updateProgress(section, slide);\n        translate(section, slide);\n        open = false;\n      }\n\n      function removeClick(slides) {\n        nodeMap(slides, slide => {\n          slide.removeEventListener('click', addClick);\n        });\n      }\n    }\n  });\n}\n","import Matrix from './matrix';\nimport init from './init';\nimport progress from './progress';\nimport keys from './keys';\nimport overview from './overview';\n\nimport {body, timing, notesMessage, slideMessage} from './notes';\n\nexport default function () {\n  const matrix = new Matrix();\n\n  if (!matrix.options.notes) {\n    init();\n    progress(matrix);\n    keys(matrix);\n    overview(matrix);\n  }\n  else {\n    body();\n    timing();\n    notesMessage();\n  }\n\n  if (matrix.options.listen) {\n    slideMessage(matrix);\n  }\n\n  document.body.classList.add('stage-fright');\n  if (matrix.options.responsive) {\n    document.body.style.fontSize = '1.5vw';\n  }\n};\n","import stageFright from './lib/core.js'\n\nstageFright();\n"]}